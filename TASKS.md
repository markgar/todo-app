# Tasks

## Setup

- [x] 1. Install .NET 10 SDK prerequisites and verify `dotnet --version` returns 10.x
- [x] 2. Create the solution file `TodoApp.sln` at the repository root
- [x] 3. Create the directory structure: `src/TodoApp.Shared/`, `src/TodoApp.Data/`, `src/TodoApp.Api/`, `src/TodoApp.Web/`, and `tests/TodoApp.Api.Tests/`
- [x] 4. Remove any default scaffolding or template code that does not belong (e.g., auto-generated WeatherForecast files, Counter/Home boilerplate unrelated to todos)

## Shared Library (TodoApp.Shared)

- [x] 5. Create `TodoApp.Shared` class library project (`dotnet new classlib`) and add it to the solution
- [x] 6. Define the `TodoItem` model with properties: `Id` (int, auto-generated), `Title` (string, required), `IsComplete` (bool, default false)
- [x] 7. Remove any default `Class1.cs` placeholder file from the Shared project

## Data Layer (TodoApp.Data)

- [x] 8. Create `TodoApp.Data` class library project and add it to the solution
- [x] 9. Add NuGet references: `Microsoft.EntityFrameworkCore.InMemory` to TodoApp.Data; add project reference to `TodoApp.Shared`
- [x] 10. Implement `TodoDbContext` inheriting from `DbContext` with a `DbSet<TodoItem>` property, configured to use `UseInMemoryDatabase("TodoDb")`
- [x] 11. Remove any default `Class1.cs` placeholder file from the Data project

## API Layer (TodoApp.Api)

- [x] 12. Create `TodoApp.Api` web API project (`dotnet new webapi`) and add it to the solution
- [x] 13. Add project references from TodoApp.Api to `TodoApp.Shared` and `TodoApp.Data`
- [x] 14. Configure dependency injection for `TodoDbContext` in `Program.cs` using the InMemory provider
- [x] 15. Implement seed data logic in `Program.cs` to insert at least 3 sample `TodoItem` records on startup if the database is empty
- [x] 16. Implement `GET /api/todos` endpoint — returns all todos (200)
- [x] 17. Implement `GET /api/todos/{id}` endpoint — returns a single todo by id (200) or 404 if not found
- [x] 18. Implement `POST /api/todos` endpoint — creates a new todo from JSON body with `title`, returns 201 with the created item
- [x] 19. Implement `PUT /api/todos/{id}` endpoint — updates an existing todo's title and/or isComplete (200) or 404 if not found
- [x] 20. Implement `DELETE /api/todos/{id}` endpoint — deletes a todo (204) or 404 if not found
- [x] 21. Remove any default scaffolding endpoints (e.g., WeatherForecast controller/endpoints) that were auto-generated by the template

## Web Front-End (TodoApp.Web)

- [x] 22. Create `TodoApp.Web` Blazor project (`dotnet new blazor` or `dotnet new blazorserver`) and add it to the solution
- [x] 23. Add project reference from TodoApp.Web to `TodoApp.Shared`
- [x] 24. Configure `HttpClient` in `Program.cs` to point to the API base URL (e.g., `https://localhost:{port}`)
- [x] 25. Create a Todo List page/component that fetches and displays all todos from `GET /api/todos`, showing each todo's title and completion status
- [x] 26. Add an "Add Todo" form/input that sends a `POST /api/todos` request to create a new todo by title, then refreshes the list
- [x] 27. Add a "Complete/Toggle" button for each todo that sends a `PUT /api/todos/{id}` request to toggle `IsComplete`, then refreshes the list
- [x] 28. Add a "Delete" button for each todo that sends a `DELETE /api/todos/{id}` request to remove it, then refreshes the list
- [x] 29. Remove any default template pages/components not related to the todo functionality (e.g., Counter, Weather, default Home content)

## Integration Tests (TodoApp.Api.Tests)

- [x] 30. Create `TodoApp.Api.Tests` xUnit test project (`dotnet new xunit`) and add it to the solution
- [x] 31. Add NuGet reference `Microsoft.AspNetCore.Mvc.Testing` and project reference to `TodoApp.Api`
- [x] 32. Set up a test class using `WebApplicationFactory<Program>` to create an in-process test server
- [x] 33. Write test: `GET /api/todos` returns 200 and the response contains the seeded todos (at least 3)
- [x] 34. Write test: `POST /api/todos` with a valid title creates a new todo and returns 201
- [x] 35. Write test: `GET /api/todos/{id}` returns 200 and the correct todo for an existing id
- [x] 36. Write test: `PUT /api/todos/{id}` updates a todo's title and/or isComplete and returns 200
- [x] 37. Write test: `DELETE /api/todos/{id}` removes the todo and returns 204
- [x] 38. Write test: `GET /api/todos/{id}` returns 404 for a non-existent id

## Fix Spec Compliance

- [x] 45. Convert solution from `TodoApp.slnx` to `TodoApp.sln` — the spec requires a standard `.sln` file, not the newer `.slnx` format. Generate a traditional `.sln` using `dotnet sln` commands (create new `TodoApp.sln`, add all projects from `src/` and `tests/`), then remove `TodoApp.slnx`. Ensure `dotnet build` and `dotnet test` still work with the new `.sln`.

## Verification

- [x] 39. Run `dotnet build` on the entire solution and verify zero errors
- [x] 40. Run `dotnet test` and verify all integration tests pass
- [x] 41. Start the API (`dotnet run --project src/TodoApp.Api`) and manually verify `GET /api/todos` returns at least 3 seeded todos
- [x] 42. Verify all CRUD operations work correctly through the API endpoints
- [x] 43. Start the Blazor front-end and verify it renders the todo list and supports add, complete, and delete operations
- [x] 44. Confirm all projects are included in `TodoApp.sln` and the directory structure matches the spec (`src/` and `tests/`)
- [x] 46. Re-verify end-to-end: `dotnet build` succeeds with zero errors, `dotnet test` passes all tests, and `TodoApp.sln` (not `.slnx`) contains all projects matching the spec directory structure
